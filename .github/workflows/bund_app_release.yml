name: Trigger Bund Release tasks from CirrusCI

on: 
  workflow_dispatch:
    inputs:
        skip_security_tests:
          description: 'Do you want to skip running security tests?'
          required: false
          default: false
          type: boolean

permissions: 
  checks: wirte

jobs:
  column_1_restricted:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
        with:
          fetch-depth: 0
      - uses: cirruslabs/cirrus-action@latest
        with:
          args: '-e SKIP_SECURITY_TESTS="${{ inputs.skip_security_tests }}" AppStore C1 Restricted'

  column_1_production:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
        with:
          fetch-depth: 0
      - uses: cirruslabs/cirrus-action@latest
        with:
          args: '-e SKIP_SECURITY_TESTS="${{ inputs.skip_security_tests }}" AppStore C1 Production'

  column_3_restricted:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
        with:
          fetch-depth: 0
      - uses: cirruslabs/cirrus-action@latest
        with:
          args: '-e SKIP_SECURITY_TESTS="${{ inputs.skip_security_tests }}" AppStore C3 Restricted'

  column_3_production:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
        with:
          fetch-depth: 0
      - uses: cirruslabs/cirrus-action@latest
        with:
          args: '-e SKIP_SECURITY_TESTS="${{ inputs.skip_security_tests }}" AppStore C3 Production'
